instances:
  - id: hetzner-s3
    repository: s3:https://fsn1.your-objectstorage.com/restic12t681
    schedule: "0 2 * * *" # Daily at 2 AM - backs up all volumes/DBs assigned to this instance
    retention: "30d:12w:24m" # Optional: instance-specific retention (overrides global)
    env:
      AWS_ACCESS_KEY_ID: your-access-key
      AWS_SECRET_ACCESS_KEY: your-secret-key
      AWS_DEFAULT_REGION: fsn1
      RESTIC_PASSWORD: your-restic-password
  - id: local-backup
    repository: /mnt/backup/restic
    schedule: "0 3 * * *" # Daily at 3 AM
    # No retention specified - will use global default below
    env:
      RESTIC_PASSWORD: your-restic-password
  - id: env-example
    repository: s3:https://nyc3.digitaloceanspaces.com/my-backup-bucket
    schedule: "30 2 * * *" # Daily at 2:30 AM
    env:
      AWS_ACCESS_KEY_ID: ${DO_SPACES_KEY}
      AWS_SECRET_ACCESS_KEY: ${DO_SPACES_SECRET}
      AWS_DEFAULT_REGION: nyc3
      RESTIC_PASSWORD: ${RESTIC_PASS}

# Global defaults (can be overridden by instance config or Docker labels)
# If not specified here, Marina uses hardcoded defaults:
#   - retention: "7d:4w:6m" (7 daily, 4 weekly, 6 monthly)
#   - stopAttached: false
retention: "14d:8w:12m" # Format: daily:weekly:monthly - applies to all instances unless overridden
stopAttached: true # Stop containers when backing up volumes

# Mesh configuration (optional) - for connecting multiple Marina instances
# When configured, the dashboard will show backup schedules from all connected nodes
mesh:
  # Optional custom node name (defaults to hostname if not specified)
  nodeName: ${NODE_NAME} # or "production-server-1"
  
  # List of peer Marina API URLs to fetch data from
  # Each peer should be reachable via HTTP/HTTPS
  peers:
    - http://marina-node2:8080
    - http://marina-node3:8080
    # Or use environment variables:
    # - ${PEER_NODE_1}
    # - ${PEER_NODE_2}

# Dynamic discovery settings (can also be set via environment variables):
# DISCOVERY_INTERVAL: How often to poll for container/volume changes (default: 30s)
# ENABLE_EVENTS: Enable Docker event listener for real-time updates (default: true)
